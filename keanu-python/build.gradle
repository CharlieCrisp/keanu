assemble.dependsOn(":shadowJar")
assemble.dependsOn(":codegen:processor:codeGen")

task pytest {
    doLast {
        exec {
            commandLine 'python3', '--version'
        }
        exec {
            commandLine 'pip3', '--version'
        }
        exec {
            commandLine 'pip3', 'install', 'pipenv'
        }
        exec {
            commandLine 'pipenv', 'install', '--dev', '--three'
        }
        exec {
            commandLine 'pipenv', 'run', 'pytest'
        }
    }
}

test.dependsOn(pytest)